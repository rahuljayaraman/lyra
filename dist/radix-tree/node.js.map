{"version":3,"sources":["../../src/radix-tree/node.ts"],"sourcesContent":["import type { Nullable } from \"../types.js\";\nimport { uniqueId } from \"../utils.js\";\n\nexport interface Node {\n  id: string;\n  key: string;\n  subWord: string;\n  parent: Nullable<string>;\n  children: Record<string, Node>;\n  docs: string[];\n  end: boolean;\n  word: string;\n}\n\nexport function create(end = false, subWord = \"\", key = \"\"): Node {\n  const node = {\n    id: uniqueId(),\n    key,\n    subWord,\n    parent: null,\n    children: {},\n    docs: [],\n    end,\n    word: \"\",\n  };\n\n  Object.defineProperty(node, \"toJSON\", { value: serialize });\n  return node;\n}\n\nexport function updateParent(node: Node, parent: Node): void {\n  node.parent = parent.id;\n  node.word = parent.word + node.subWord;\n}\n\nexport function addDocument(node: Node, docID: string): void {\n  node.docs.push(docID);\n}\n\nexport function removeDocument(node: Node, docID: string): boolean {\n  const index = node.docs.indexOf(docID);\n\n  /* c8 ignore next 3 */\n  if (index === -1) {\n    return false;\n  }\n\n  node.docs.splice(index, 1);\n\n  return true;\n}\n\n/* c8 ignore next 5 */\nfunction serialize(this: Node): object {\n  const { word, subWord, children, docs, end } = this;\n\n  return { word, subWord, children, docs, end };\n}\n"],"names":["uniqueId","create","end","subWord","key","node","id","parent","children","docs","word","Object","defineProperty","value","serialize","updateParent","addDocument","docID","push","removeDocument","index","indexOf","splice"],"mappings":"AACA,SAASA,QAAQ,QAAQ,cAAc;AAavC,OAAO,SAASC,OAAOC,MAAM,KAAK,EAAEC,UAAU,EAAE,EAAEC,MAAM,EAAE,EAAQ;IAChE,MAAMC,OAAO;QACXC,IAAIN;QACJI;QACAD;QACAI,QAAQ,IAAI;QACZC,UAAU,CAAC;QACXC,MAAM,EAAE;QACRP;QACAQ,MAAM;IACR;IAEAC,OAAOC,cAAc,CAACP,MAAM,UAAU;QAAEQ,OAAOC;IAAU;IACzD,OAAOT;AACT,CAAC;AAED,OAAO,SAASU,aAAaV,IAAU,EAAEE,MAAY,EAAQ;IAC3DF,KAAKE,MAAM,GAAGA,OAAOD,EAAE;IACvBD,KAAKK,IAAI,GAAGH,OAAOG,IAAI,GAAGL,KAAKF,OAAO;AACxC,CAAC;AAED,OAAO,SAASa,YAAYX,IAAU,EAAEY,KAAa,EAAQ;IAC3DZ,KAAKI,IAAI,CAACS,IAAI,CAACD;AACjB,CAAC;AAED,OAAO,SAASE,eAAed,IAAU,EAAEY,KAAa,EAAW;IACjE,MAAMG,QAAQf,KAAKI,IAAI,CAACY,OAAO,CAACJ;IAEhC,oBAAoB,GACpB,IAAIG,UAAU,CAAC,GAAG;QAChB,OAAO,KAAK;IACd,CAAC;IAEDf,KAAKI,IAAI,CAACa,MAAM,CAACF,OAAO;IAExB,OAAO,IAAI;AACb,CAAC;AAED,oBAAoB,GACpB,SAASN,YAA8B;IACrC,MAAM,EAAEJ,KAAI,EAAEP,QAAO,EAAEK,SAAQ,EAAEC,KAAI,EAAEP,IAAG,EAAE,GAAG,IAAI;IAEnD,OAAO;QAAEQ;QAAMP;QAASK;QAAUC;QAAMP;IAAI;AAC9C"}